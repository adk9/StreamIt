\section{Results}
\label{sec:results}

We have implemented a fully-functional prototype of the StreamIt
compiler for the Raw architecture; the compiler phases are described
in Table~\ref{tab:stages}. We have implemented all the phases of the
compiler as well as the optimizations except for the optimization
selection, which is currently done by the programmer.

\begin{table}[t]
\begin{center}
\scriptsize
\begin{tabular}{|l|l|} \hline
Benchmark & Description\\
\hline \hline
FM Radio & A software-based FM Radio with equalizer\\
\hline
GSM & A GSM Decoder\\
\hline
Beamformer & code of modern radar, sonar, and communications signal processors \cite{pca}\\
\hline
FFT & A 64-element FFT filter \\
\hline
CRC & A 32-bit Cyclic Redundancy Check (CRC) Encoder/Decoder\\
\hline
\end{tabular}
\vspace{-6pt}
\caption{\protect\small Application Characteristics}
\label{tab:benchmarks}
\vspace{-12pt}
\end{center}
\end{table}



%We have evaluated our compiler with StreamIt versions applications: 
%\begin{itemize}
%
%\item A software-based FM Radio with
%equalizer, 
%
%\item A GSM Decoder, which takes GSM-encoded parameters as
%inputs, and uses these to synthesize audible speech, 
%
%\item A beamformer
%which encapsulates the core functionality of modern radar, sonar, and
%communications signal processors -- modeled after a system from the
%Polymorphic Computing Architecture (PCA) \cite{pca}

%\item A 64-element FFT filter implemented as a pipeline of a bit reversal 
%filter followed by multiple-stage butterfly filters.

%\item A Cyclic Redundancy Check (CRC) Encoder/Decoder, which is an error detection system utilizing a predefined 32 bit generator polynomial.  It can detect errors in bit strings of up to 64KB in size with 99.99999997% accuracy.

%\item Matrix Multiplication 

%\item A MP3

%\item A performance test from the SpectrumWare system that
%implements an Orthogonal Frequency Division Multiplexor (OFDM)
%\cite{spectrumware}.  Table \ref{tab:benchmarks} gives characteristics
%of the above applications including the number of filters implemented
%and the size of the stream graph as coded.

%%\end{itemize}


\begin{table}[t]
\begin{center}
\scriptsize
\begin{tabular}{|l|c|r|r|r|r|r|r|} \hline
& Lines & \multicolumn{3}{|c|}{Unoptimized} & \multicolumn{3}{|c|}{Optimized}\\
\cline{3-8}
Benchmark & 
\begin{tabular}{c} 
of \\ code
\end{tabular} &    
\begin{tabular}{c} 
\# of \\ filters
\end{tabular} &    
\begin{tabular}{c} Throughput \\
cycles / output 
\end{tabular} &    
MFLOPS & 
\begin{tabular}{c} 
\# of \\ filters
\end{tabular} &    
\begin{tabular}{c} Throughput \\
cycles / output 
\end{tabular}  &
MFLOPS
\\
\hline \hline
BeamFormer & 596 & 15 & 125000 & 525 & 16 & 35714 & 2300\\
\hline
FM Radio & 511 & 14 & 4466 & 141.5 & 14 & 1742 & 363.5\\
\hline
FFT & 174 & 31 & 156 & 35.75 & 15 & 3601 & 4.25\\
\hline
GSM Decoder & 1925 & 14 & 1706 & N/A & 16 & 1656 & N/A\\
\hline
CRC & 336 & 47 & 2847 & N/A & 5 & 1909 & N/A\\
\hline
%%Matrix & \\
%%\hline
\end{tabular}
\vspace{-6pt}
\caption{\protect\small Performance Results}
\label{tab:performance}
\vspace{-21pt}
\end{center}
\end{table}


In the Table~\ref{tab:performance}, we evaluate the effectiveness of
StreamIt compiler by compiling the above applications on to the Raw
processor. The executables are simulated on either a 4x4 or an 8x8 Raw
processor using Raw's cycle accurate simulator. We show the
performance of the original application, which is run on a processor
configuration with sufficent tiles so that each filter can be mapped
to an individual tile. Next we perform a series of fusion, fisson and
reindexing transformations to create a load balanced set of filters
that can be mapped onto a 4x4 Raw processor.

\begin{figure}
\begin{minipage}{3.2in}
\centering
\psfig{figure=speedup-diagram.eps,width=3.3in}
\caption{The speedup due to optimizations normalized to original performance.
\protect\label{fig:opt-diagram}}
\end{minipage}
\hspace{0.1in}
\begin{minipage}{3.2in}
\centering
\psfig{figure=utilization-diagram.eps,width=3.2in}
\caption{Utilization of a tile ofter optimization normalized to the original utilization.}
\end{minipage}
\end{figure}

The results show that for program with substantial computation
requirements such as the BeamFormer, the StreamIt compiler is able to
extract exteremly good performance out of the Raw processor. A
sustained 2.3 GFLOPS rate after 438% improvement due to our
optimizations. However programs such as FFT, which was created to
experiment with the languatge features of StreamIt, has very little
work per filter. We were unable to amortize the communication
overhead for FFT, leading to a slowdown. Better tile code generation
and traditional optimizations may help in this. 

